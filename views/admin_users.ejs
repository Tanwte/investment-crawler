<!DOCTYPE html><html><head><meta charset="utf-8"><title>Users</title><link rel="stylesheet" href="/styles.css"></head>
<body><header><h1>Users</h1><nav><a href="/admin">Back</a></nav></header>
<main class="card" style="max-width:960px;margin:16px auto;">
<h2>Create User</h2>
<form method="POST" action="/admin/users/create">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
  <label>Username</label><input name="username" required>
  <label>Password</label><input name="password" type="password" required>
  <label>Role</label>
  <select name="role"><option value="user">user</option><option value="admin">admin</option></select>
  <button type="submit">Create</button>
</form>
<hr>
<h2>Existing Users</h2>
<table class="table">
<tr><th>ID</th><th>Username</th><th>Role</th><th>Created</th><th>Updated</th><th>Actions</th></tr>
<% users.forEach(u=>{ %>
<tr>
  <td><%= u.id %></td>
  <td><%= u.username %></td>
  <td><%= u.role %></td>
  <td><%= u.created_at %></td>
  <td><%= u.updated_at %></td>
  <td>
    <form method="POST" action="/admin/users/reset" style="display:inline;">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <input type="hidden" name="user_id" value="<%= u.id %>">
      <button type="submit">Reset Password</button>
    </form>
    <form method="POST" action="/admin/users/delete" style="display:inline;margin-left:8px;">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <input type="hidden" name="user_id" value="<%= u.id %>">
      <button type="submit" onclick="return confirm('Delete user <%= u.username %>?')">Delete</button>
    </form>
  </td>
</tr>
<% }) %>
</table>
</main></body></html>